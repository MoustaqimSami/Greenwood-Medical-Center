<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Patients | GMC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="../../css/style.css" />
  <link rel="stylesheet" href="../../css/template.css" />
  <link rel="stylesheet" href="../../css/components.css" />
  <link rel="stylesheet" href="../../css/patients.css" />
</head>

<body>
  <div class="app-shell">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-inner">
        <div class="sidebar-top">
          <button class="brand-button" aria-label="Clinic home">
            <img src="../../assets/icons/logo.svg" alt="Clinic logo" class="brand-logo" />
          </button>

          <button class="sidebar-toggle" aria-label="Toggle sidebar">
            <img src="../../assets/icons/layout-sidebar.svg" data-open-src="../../assets/icons/layout-sidebar.svg"
              data-collapsed-src="../../assets/icons/layout-sidebar-closed.svg" alt="Toggle sidebar"
              class="sidebar-toggle-icon" />
          </button>
        </div>

        <!-- Navigation -->
        <nav class="sidebar-nav">
          <a class="nav-item" href="../HomePage/dashboard.html">
            <img class="nav-icon" src="../../assets/icons/home.svg" alt="" />
            <span class="nav-label">Home</span>
          </a>

          <a class="nav-item" href="../SchedulePage/schedule.html">
            <img class="nav-icon" src="../../assets/icons/calendar.svg" alt="" />
            <span class="nav-label">Schedule</span>
          </a>

          <a class="nav-item" href="../PatientPages/patients.html">
            <img class="nav-icon" src="../../assets/icons/people.svg" alt="" />
            <span class="nav-label">Patients</span>
          </a>

          <a class="nav-item" href="../DoctorPages/doctors.html">
            <img class="nav-icon" src="../../assets/icons/stethoscope.svg" alt="" />
            <span class="nav-label">Doctors</span>
          </a>
        </nav>

        <!-- Bottom Links -->
        <div class="sidebar-bottom">
          <a class="nav-item" href="#">
            <img class="nav-icon" src="../../assets/icons/question-circle.svg" alt="" />
            <span class="nav-label">Help center</span>
          </a>

          <a class="nav-item" href="#">
            <img class="nav-icon" src="../../assets/icons/tabler_logout.svg" alt="" />
            <span class="nav-label">Log out</span>
          </a>
        </div>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <div class="main">
      <!-- HEADER -->
      <header class="topbar">
        <div class="topbar-left"></div>

        <div class="topbar-right">
          <button class="icon-button" aria-label="Notifications">
            <img src="../../assets/icons/alert.svg" alt="Notifications" />
          </button>

          <div class="user-chip">
            <div class="avatar-circle">
              <img src="../../assets/icons/person.svg" alt="User profile" class="avatar-icon" />
            </div>
            <div class="user-meta">
              <span class="user-name">Selena Doe</span>
              <span class="user-role">Front Desk Staff</span>
            </div>
          </div>
        </div>
      </header>

      <!-- PAGE -->

      <main class="page">
        <header class="page-header">
          <h1 class="page-title">Patients</h1>
          <div style="margin-left:auto;">
            <button class="new-pat-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path
                  d="M9.167 14.5836C9.167 13.5095 9.47958 12.5084 10.0188 11.6664L3.54398 11.6669C2.50896 11.6669 1.66992 12.5059 1.66992 13.541V14.3075C1.66992 14.7843 1.81859 15.2491 2.09522 15.6374C3.38036 17.441 5.48283 18.3345 8.33366 18.3345C9.10975 18.3345 9.8305 18.2683 10.4934 18.1349C9.66716 17.184 9.167 15.9422 9.167 14.5836ZM12.5003 5.83744C12.5003 3.53626 10.6348 1.67078 8.33366 1.67078C6.03245 1.67078 4.16696 3.53626 4.16696 5.83744C4.16696 8.13863 6.03245 10.0041 8.33366 10.0041C10.6348 10.0041 12.5003 8.13863 12.5003 5.83744ZM19.167 14.5835C19.167 12.0523 17.1149 10.0002 14.5837 10.0002C12.0523 10.0002 10.0003 12.0523 10.0003 14.5835C10.0003 17.1149 12.0523 19.1669 14.5837 19.1669C17.1149 19.1669 19.167 17.1149 19.167 14.5835ZM14.5087 11.6736L14.5837 11.6669L14.6585 11.6736C14.8286 11.7045 14.9627 11.8386 14.9936 12.0087L15.0003 12.0835L14.9995 14.1669H17.0869L17.1618 14.1736C17.3318 14.2045 17.466 14.3386 17.4968 14.5087L17.5036 14.5835L17.4968 14.6585C17.466 14.8285 17.3318 14.9626 17.1618 14.9935L17.0869 15.0002H14.9995L15.0003 17.0835L14.9936 17.1585C14.9627 17.3285 14.8286 17.4626 14.6585 17.4935L14.5837 17.5002L14.5087 17.4935C14.3387 17.4626 14.2046 17.3285 14.1737 17.1585L14.167 17.0835L14.1662 15.0002H12.0869L12.012 14.9935C11.8419 14.9626 11.7078 14.8285 11.6769 14.6585L11.6702 14.5835L11.6769 14.5087C11.7078 14.3386 11.8419 14.2045 12.012 14.1736L12.0869 14.1669H14.1662L14.167 12.0835L14.1737 12.0087C14.2046 11.8386 14.3387 11.7045 14.5087 11.6736Z"
                  fill="#FCFCFC" />
              </svg>
              Add Patient</button>
          </div>
        </header>

        <section class="page-body">
          <div class="flexcol-gap12">
            <div class="search-box"> <!-- Search Box -->
              <div class="search-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="search-icon">
                  <path
                    d="M3.75 8.33333C3.75 5.80202 5.80202 3.75 8.33333 3.75C10.8647 3.75 12.9167 5.80202 12.9167 8.33333C12.9167 10.8647 10.8647 12.9167 8.33333 12.9167C5.80202 12.9167 3.75 10.8647 3.75 8.33333ZM8.33333 2.5C5.11168 2.5 2.5 5.11168 2.5 8.33333C2.5 11.555 5.11168 14.1667 8.33333 14.1667C9.719 14.1667 10.9918 13.6835 11.9926 12.8765L16.4331 17.3169C16.6772 17.561 17.0728 17.561 17.3169 17.3169C17.561 17.0728 17.561 16.6772 17.3169 16.4331L12.8765 11.9926C13.6835 10.9918 14.1667 9.719 14.1667 8.33333C14.1667 5.11168 11.555 2.5 8.33333 2.5Z" />
                </svg>
                <input type="text" id="myInput" class="search-input"
                  placeholder="Search patients (name, phone, date of birth, etc.)..." />
              </div>
          
              <button class="btn btn--sec" id="searchButton">Search</button> <!-- Search Button -->
          
              <div class="patients-filters flexrow-gap16">
                <label class="filter-label">
          
                  <select id="genderFilter" class="filter-select">
                    <option value="">All genders</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                  </select>
                </label>
          
                <label class="filter-label">
          
                  <select id="sortBy" class="filter-select">
                    <option value="name-asc">Name (A–Z)</option>
                    <option value="name-desc">Name (Z–A)</option>
                  </select>
                </label>
              </div>
            </div>
          
            <table id="myTable">
              <thead>
                <tr>
                  <th>First Name</th>
                  <th>Last Name</th>
                  <th>Date of Birth</th>
                  <th>Phone Number</th>
                  <th>Gender</th>
                </tr>
              </thead>
              <tbody id="patientsTableBody">
                <!-- Will be filled by JS -->
              </tbody>
            </table>
          </div>

          <!-- Add Patient Modal -->
          <div id="addPatientModal" class="modal">
            <div class="modal-content">
              <div class="modal-header">
                <h2>Add New Patient</h2>
                <div class="modal-header-right">
                  <div class="retrieve-ahs-box">
                    <label>Retrieve AHS Information</label>
                    <input type="text" class="ahs-input" placeholder="Enter AHS Number" />
                  </div>
                  <button class="modal-close">&times;</button>
                </div>
              </div>

              <form id="addPatientForm" class="modal-form">
                <!-- Personal Information Section -->
                <div class="item--personal">
                  <div class="item-header">
                    <h3>Personal Information</h3>
                  </div>
                  <div class="content-1">
                    <label>First name</label>
                    <input type="text" placeholder="John" name="firstName" required />
                  </div>
                  <div class="content-2">
                    <label>Last name</label>
                    <input type="text" placeholder="Doe" name="lastName" required />
                  </div>
                  <div class="content-3">
                    <label>Date of birth</label>
                    <input type="date" name="dateOfBirth" required />
                  </div>
                  <div class="content-4">
                    <label>Gender</label>
                    <select name="gender" required>
                      <option value="">Select Gender</option>
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                      <option value="Other">Other</option>
                    </select>
                  </div>
                </div>

                <!-- Contact Information Section -->
                <div class="item--personal">
                  <div class="item-header">
                    <h3>Contact Information</h3>
                  </div>
                  <div class="content-1">
                    <label>Phone Number</label>
                    <input type="tel" placeholder="(141) 911-2000" name="phoneNumber" required />
                  </div>
                  <div class="content-2">
                    <label>Address</label>
                    <input type="text" placeholder="123 Main St, City, Province" name="address" required />
                  </div>
                  <div class="content-3">
                    <label>Emergency Contact</label>
                    <input type="text" placeholder="Jane Doe" name="emergencyContact" required />
                  </div>
                  <div class="content-4">
                    <label>Emergency Phone</label>
                    <input type="tel" placeholder="(555) 987-6543" name="emergencyPhone" required />
                  </div>
                </div>

                <!-- Healthcare Information Section -->
                <div class="item--personal">
                  <div class="item-header">
                    <h3>Healthcare Information</h3>
                  </div>
                  <div class="content-1">
                    <label>Alberta Healthcare Number</label>
                    <input type="text" placeholder="87651234" name="healthcareNumber" required />
                  </div>
                  <div class="content-2">
                    <label>Family Doctor</label>
                    <input type="text" placeholder="Dr. Nelson James" name="familyDoctor" required />
                  </div>
                  <div class="content-3">
                    <label>Referred by</label>
                    <input type="text" placeholder="Dr. John Whale" name="referredBy" required />
                  </div>
                  <div class="content-4">
                    <label>Other Healthcare Insurance</label>
                    <input type="text" placeholder="Insurance Company Name" name="otherInsurance" />
                  </div>
                </div>

                <!-- Form Actions -->
                <div class="modal-actions">
                  <button type="button" class="btn btn--secondary modal-cancel">Cancel</button>
                  <button type="submit" class="btn btn--primary">Add Patient</button>
                </div>
              </form>
            </div>
          </div>


      </main>
      <!-- END OF PAGE -->
    </div>
  </div>

  <script src="../../database/patients-database.js"></script>

  <script src="./patientLogic/patient-book-appointment.js"></script>
  <script src="./patientLogic/patient-page.js"></script>

  <script src="../layout.js"></script>

  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const params = new URLSearchParams(window.location.search);
    if (params.get("open") === "addPatient") {
      const addBtn = document.querySelector(".new-pat-btn");
      if (addBtn) {
        addBtn.click();
      }
    }
  });
</script>

</body>

</html>